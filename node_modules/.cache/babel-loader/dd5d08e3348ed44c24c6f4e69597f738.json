{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _List = _interopRequireWildcard(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _Widget = require(\"./Widget\");\n\nconst _excluded = [\"defaultValue\", \"value\", \"onChange\", \"textField\", \"dataKey\", \"data\", \"onKeyDown\", \"disabled\", \"readOnly\", \"onBlur\", \"onFocus\", \"multiple\"];\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n\n  /**\n   * @example false\n   */\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst Listbox = /*#__PURE__*/_react.default.forwardRef(function Listbox(_ref, _outerRef) {\n  let {\n    defaultValue,\n    value: propsValue,\n    onChange: propsOnChange,\n    textField,\n    dataKey,\n    data,\n    onKeyDown,\n    disabled,\n    readOnly,\n    onBlur,\n    onFocus,\n    multiple\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const [value, onChange] = (0, _uncontrollable.useUncontrolledProp)(propsValue, defaultValue, propsOnChange);\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const dataItems = (0, _react.useMemo)(() => (0, _.makeArray)(value, multiple).map(item => accessors.findOrSelf(data, item)), [value, multiple, accessors, data]);\n  const ref = (0, _react.useRef)(null);\n  const lastItemRef = (0, _react.useRef)(dataItems[dataItems.length - 1]);\n  const list = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    anchorItem: lastItemRef.current\n  });\n  const isDisabled = disabled === true;\n\n  const handleChange = (dataItem, meta) => {\n    if (isDisabled || readOnly) return;\n    lastItemRef.current = meta.dataItem;\n    onChange(dataItem, meta);\n  };\n\n  const handleSelect = (0, _List.useHandleSelect)(!!multiple, dataItems, handleChange);\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (!focused) {\n        list.focus(undefined);\n      } else {\n        focus({\n          preventScroll: true\n        });\n      }\n    }\n\n  });\n\n  function focus(opts) {\n    if (ref.current) ref.current.focus(opts);\n  }\n\n  const handleKeyDown = e => {\n    if (isDisabled || readOnly) return;\n    let {\n      key,\n      shiftKey\n    } = e;\n    (0, _WidgetHelpers.notify)(onKeyDown, [e]);\n    if (e.defaultPrevented) return;\n\n    if (key === 'End' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.last());\n    } else if (key === 'Home' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.first());\n    } else if (key === 'Enter' || key === ' ') {\n      e.preventDefault();\n      if (list.getFocused()) handleSelect(list.getFocused(), e);\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n      list.focus(list.next());\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      list.focus(list.prev());\n    }\n  };\n\n  const widgetProps = (0, _Widget.useWidgetProps)({\n    focused,\n    readOnly,\n    disabled: isDisabled,\n    className: (0, _classnames.default)(props.className, 'rw-listbox rw-widget-input rw-widget')\n  });\n  return /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, /*#__PURE__*/_react.default.createElement(_List.default, _extends({}, props, widgetProps, {\n    disabled: disabled,\n    tabIndex: isDisabled ? -1 : 0,\n    data: data,\n    elementRef: ref,\n    value: dataItems,\n    multiple: multiple,\n    accessors: accessors\n  }, focusEvents, {\n    onChange: handleChange,\n    onKeyDown: handleKeyDown\n  })));\n});\n\nListbox.displayName = 'Listbox';\nListbox.propTypes = propTypes;\nvar _default = Listbox;\nexports.default = _default;","map":{"version":3,"sources":["/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/react-widgets/cjs/Listbox.js"],"names":["exports","__esModule","default","_propTypes","_interopRequireDefault","require","_classnames","_react","_interopRequireWildcard","_uncontrollable","_List","_FocusListContext","CustomPropTypes","_","_Accessors","_WidgetHelpers","_useFocusManager","_Widget","_excluded","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","propTypes","data","array","dataKey","accessor","textField","onSelect","func","onMove","onHoverOption","optionComponent","elementType","renderItem","renderGroup","focusedItem","any","selectedItem","searchTerm","string","disabled","acceptsArray","messages","shape","emptyList","isRequired","Listbox","forwardRef","_ref","_outerRef","defaultValue","value","propsValue","onChange","propsOnChange","onKeyDown","readOnly","onBlur","onFocus","multiple","props","useUncontrolledProp","accessors","useAccessors","dataItems","useMemo","makeArray","map","item","findOrSelf","ref","useRef","lastItemRef","list","useFocusList","scope","anchorItem","current","isDisabled","handleChange","dataItem","meta","handleSelect","useHandleSelect","focusEvents","focused","didHandle","focus","undefined","preventScroll","opts","handleKeyDown","e","shiftKey","notify","defaultPrevented","preventDefault","last","first","getFocused","next","prev","widgetProps","useWidgetProps","className","createElement","FocusListContext","Provider","context","tabIndex","elementRef","displayName","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _List = _interopRequireWildcard(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _Widget = require(\"./Widget\");\n\nconst _excluded = [\"defaultValue\", \"value\", \"onChange\", \"textField\", \"dataKey\", \"data\", \"onKeyDown\", \"disabled\", \"readOnly\", \"onBlur\", \"onFocus\", \"multiple\"];\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n\n  /**\n   * @example false\n   */\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst Listbox = /*#__PURE__*/_react.default.forwardRef(function Listbox(_ref, _outerRef) {\n  let {\n    defaultValue,\n    value: propsValue,\n    onChange: propsOnChange,\n    textField,\n    dataKey,\n    data,\n    onKeyDown,\n    disabled,\n    readOnly,\n    onBlur,\n    onFocus,\n    multiple\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const [value, onChange] = (0, _uncontrollable.useUncontrolledProp)(propsValue, defaultValue, propsOnChange);\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const dataItems = (0, _react.useMemo)(() => (0, _.makeArray)(value, multiple).map(item => accessors.findOrSelf(data, item)), [value, multiple, accessors, data]);\n  const ref = (0, _react.useRef)(null);\n  const lastItemRef = (0, _react.useRef)(dataItems[dataItems.length - 1]);\n  const list = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    anchorItem: lastItemRef.current\n  });\n  const isDisabled = disabled === true;\n\n  const handleChange = (dataItem, meta) => {\n    if (isDisabled || readOnly) return;\n    lastItemRef.current = meta.dataItem;\n    onChange(dataItem, meta);\n  };\n\n  const handleSelect = (0, _List.useHandleSelect)(!!multiple, dataItems, handleChange);\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused) {\n      if (!focused) {\n        list.focus(undefined);\n      } else {\n        focus({\n          preventScroll: true\n        });\n      }\n    }\n\n  });\n\n  function focus(opts) {\n    if (ref.current) ref.current.focus(opts);\n  }\n\n  const handleKeyDown = e => {\n    if (isDisabled || readOnly) return;\n    let {\n      key,\n      shiftKey\n    } = e;\n    (0, _WidgetHelpers.notify)(onKeyDown, [e]);\n    if (e.defaultPrevented) return;\n\n    if (key === 'End' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.last());\n    } else if (key === 'Home' && !shiftKey) {\n      e.preventDefault();\n      list.focus(list.first());\n    } else if (key === 'Enter' || key === ' ') {\n      e.preventDefault();\n      if (list.getFocused()) handleSelect(list.getFocused(), e);\n    } else if (key === 'ArrowDown') {\n      e.preventDefault();\n      list.focus(list.next());\n    } else if (key === 'ArrowUp') {\n      e.preventDefault();\n      list.focus(list.prev());\n    }\n  };\n\n  const widgetProps = (0, _Widget.useWidgetProps)({\n    focused,\n    readOnly,\n    disabled: isDisabled,\n    className: (0, _classnames.default)(props.className, 'rw-listbox rw-widget-input rw-widget')\n  });\n  return /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, /*#__PURE__*/_react.default.createElement(_List.default, _extends({}, props, widgetProps, {\n    disabled: disabled,\n    tabIndex: isDisabled ? -1 : 0,\n    data: data,\n    elementRef: ref,\n    value: dataItems,\n    multiple: multiple,\n    accessors: accessors\n  }, focusEvents, {\n    onChange: handleChange,\n    onKeyDown: handleKeyDown\n  })));\n});\n\nListbox.displayName = 'Listbox';\nListbox.propTypes = propTypes;\nvar _default = Listbox;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}