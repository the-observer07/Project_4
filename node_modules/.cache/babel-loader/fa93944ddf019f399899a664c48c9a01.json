{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/@babel/runtime/regenerator/index.js\");\n\nvar _toConsumableArray = require(\"/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\n\nvar _classCallCheck = require(\"/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar DLList, Sync;\nDLList = require(\"./DLList\");\n\nSync = /*#__PURE__*/function () {\n  function Sync(name, Promise) {\n    _classCallCheck(this, Sync);\n\n    this.schedule = this.schedule.bind(this);\n    this.name = name;\n    this.Promise = Promise;\n    this._running = 0;\n    this._queue = new DLList();\n  }\n\n  _createClass(Sync, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this._queue.length === 0;\n    }\n  }, {\n    key: \"_tryToRun\",\n    value: function _tryToRun() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var args, cb, error, reject, resolve, returned, task, _this$_queue$shift;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(_this._running < 1 && _this._queue.length > 0)) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                _this._running++;\n                _this$_queue$shift = _this._queue.shift();\n                task = _this$_queue$shift.task;\n                args = _this$_queue$shift.args;\n                resolve = _this$_queue$shift.resolve;\n                reject = _this$_queue$shift.reject;\n                _context2.next = 9;\n                return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.prev = 0;\n                          _context.next = 3;\n                          return task.apply(void 0, _toConsumableArray(args));\n\n                        case 3:\n                          returned = _context.sent;\n                          return _context.abrupt(\"return\", function () {\n                            return resolve(returned);\n                          });\n\n                        case 7:\n                          _context.prev = 7;\n                          _context.t0 = _context[\"catch\"](0);\n                          error = _context.t0;\n                          return _context.abrupt(\"return\", function () {\n                            return reject(error);\n                          });\n\n                        case 11:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee, null, [[0, 7]]);\n                }))();\n\n              case 9:\n                cb = _context2.sent;\n                _this._running--;\n\n                _this._tryToRun();\n\n                return _context2.abrupt(\"return\", cb());\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    }\n  }, {\n    key: \"schedule\",\n    value: function schedule(task) {\n      var promise, reject, resolve;\n      resolve = reject = null;\n      promise = new this.Promise(function (_resolve, _reject) {\n        resolve = _resolve;\n        return reject = _reject;\n      });\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      this._queue.push({\n        task: task,\n        args: args,\n        resolve: resolve,\n        reject: reject\n      });\n\n      this._tryToRun();\n\n      return promise;\n    }\n  }]);\n\n  return Sync;\n}();\n\nmodule.exports = Sync;","map":{"version":3,"sources":["/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/bottleneck/lib/Sync.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","DLList","Sync","require","name","schedule","bind","_running","_queue","length","_this","_this$_queue$shift","shift","task","returned","cb","_tryToRun","promise","_resolve","_reject","push","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar DLList, Sync;\nDLList = require(\"./DLList\");\nSync = class Sync {\n  constructor(name, Promise) {\n    this.schedule = this.schedule.bind(this);\n    this.name = name;\n    this.Promise = Promise;\n    this._running = 0;\n    this._queue = new DLList();\n  }\n\n  isEmpty() {\n    return this._queue.length === 0;\n  }\n\n  _tryToRun() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var args, cb, error, reject, resolve, returned, task;\n\n      if (_this._running < 1 && _this._queue.length > 0) {\n        _this._running++;\n\n        var _this$_queue$shift = _this._queue.shift();\n\n        task = _this$_queue$shift.task;\n        args = _this$_queue$shift.args;\n        resolve = _this$_queue$shift.resolve;\n        reject = _this$_queue$shift.reject;\n        cb = yield _asyncToGenerator(function* () {\n          try {\n            returned = yield task(...args);\n            return function () {\n              return resolve(returned);\n            };\n          } catch (error1) {\n            error = error1;\n            return function () {\n              return reject(error);\n            };\n          }\n        })();\n        _this._running--;\n\n        _this._tryToRun();\n\n        return cb();\n      }\n    })();\n  }\n\n  schedule(task, ...args) {\n    var promise, reject, resolve;\n    resolve = reject = null;\n    promise = new this.Promise(function (_resolve, _reject) {\n      resolve = _resolve;\n      return reject = _reject;\n    });\n\n    this._queue.push({\n      task,\n      args,\n      resolve,\n      reject\n    });\n\n    this._tryToRun();\n\n    return promise;\n  }\n\n};\nmodule.exports = Sync;"]},"metadata":{},"sourceType":"script"}