{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nexports.__esModule = true;\nexports.useListOption = useListOption;\nexports.useFocusList = exports.FocusListContext = void 0;\n\nvar _querySelectorAll = _interopRequireDefault(require(\"dom-helpers/querySelectorAll\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/* eslint-disable react-hooks/exhaustive-deps */\n\n\nvar FocusListContext = /*#__PURE__*/_react.default.createContext(null);\n\nexports.FocusListContext = FocusListContext;\nvar defaultOpts = {\n  behavior: 'stop'\n};\n\nfunction useListOption(dataItem) {\n  var ctx = (0, _react.useContext)(FocusListContext);\n  var prevElement = (0, _react.useRef)(null); // this is a bit convoluted because we want to use a ref object, a callback ref\n  // causes an extra render which is fine except that it means the list hook for\n  // anchor items fires before elements are processed\n\n  var ref = (0, _react.useRef)(null);\n  (0, _react.useLayoutEffect)(function () {\n    return function () {\n      ctx == null ? void 0 : ctx.map.delete(ref.current);\n    };\n  }, []);\n  (0, _react.useLayoutEffect)(function () {\n    if (prevElement.current !== ref.current) {\n      ctx == null ? void 0 : ctx.map.delete(prevElement.current);\n    }\n\n    prevElement.current = ref.current;\n\n    if (ref.current && (ctx == null ? void 0 : ctx.map.get(ref.current)) !== dataItem) {\n      ctx == null ? void 0 : ctx.map.set(ref.current, dataItem);\n    }\n  });\n  var focused = dataItem === (ctx == null ? void 0 : ctx.focusedItem);\n  return [ref, focused, focused ? ctx == null ? void 0 : ctx.activeId : undefined];\n}\n\nvar useFocusList = function useFocusList(_ref) {\n  var listRef = _ref.scope,\n      anchorItem = _ref.anchorItem,\n      _ref$focusFirstItem = _ref.focusFirstItem,\n      _focusFirstItem = _ref$focusFirstItem === void 0 ? false : _ref$focusFirstItem,\n      _ref$scopeSelector = _ref.scopeSelector,\n      _scopeSelector = _ref$scopeSelector === void 0 ? '' : _ref$scopeSelector,\n      activeId = _ref.activeId;\n\n  var map = (0, _react.useMemo)(function () {\n    return new WeakMap();\n  }, []);\n\n  var _ref2 = (0, _react.useState)(),\n      _ref3 = _slicedToArray(_ref2, 2),\n      focusedItem = _ref3[0],\n      setFocusedItem = _ref3[1];\n\n  var itemSelector = \"\".concat(_scopeSelector, \" [data-rw-focusable]\").trim();\n\n  var get = function get() {\n    var items = (0, _querySelectorAll.default)(listRef.current, itemSelector);\n    return [items, items.find(function (e) {\n      return e.dataset.rwFocused === '';\n    })];\n  };\n\n  var list = (0, _react.useMemo)(function () {\n    return {\n      size: function size() {\n        var _get = get(),\n            _get2 = _slicedToArray(_get, 1),\n            items = _get2[0];\n\n        return items.length;\n      },\n      get: get,\n      toDataItem: function toDataItem(el) {\n        return map.get(el);\n      },\n      first: function first() {\n        var _get3 = get(),\n            _get4 = _slicedToArray(_get3, 1),\n            _get4$ = _slicedToArray(_get4[0], 1),\n            first = _get4$[0];\n\n        return first;\n      },\n      focus: function focus(el) {\n        if (!el || map.has(el)) setFocusedItem(el ? map.get(el) : undefined);\n      },\n      last: function last() {\n        var _get5 = get(),\n            _get6 = _slicedToArray(_get5, 1),\n            items = _get6[0];\n\n        return items[items.length - 1];\n      },\n      next: function next() {\n        var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOpts,\n            behavior = _ref4.behavior;\n\n        var _get7 = get(),\n            _get8 = _slicedToArray(_get7, 2),\n            items = _get8[0],\n            focusedItem = _get8[1];\n\n        var nextIdx = items.indexOf(focusedItem) + 1;\n\n        if (nextIdx >= items.length) {\n          if (behavior === 'loop') return items[0];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      },\n      prev: function prev() {\n        var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOpts,\n            behavior = _ref5.behavior;\n\n        var _get9 = get(),\n            _get10 = _slicedToArray(_get9, 2),\n            items = _get10[0],\n            focusedItem = _get10[1];\n\n        var nextIdx = Math.max(0, items.indexOf(focusedItem)) - 1;\n\n        if (nextIdx < 0) {\n          if (behavior === 'loop') return items[items.length - 1];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      }\n    };\n  }, []);\n  (0, _react.useLayoutEffect)(function () {\n    if (!anchorItem) {\n      list.focus(null);\n      return;\n    }\n\n    var element = get()[0].find(function (el) {\n      return list.toDataItem(el) === anchorItem;\n    });\n    list.focus(element);\n  }, [anchorItem]);\n  (0, _react.useLayoutEffect)(function () {\n    if (!listRef.current) return;\n\n    var _get11 = get(),\n        _get12 = _slicedToArray(_get11, 2),\n        focusedElement = _get12[1];\n\n    var hasItem = focusedElement != null;\n\n    if (!hasItem && _focusFirstItem || hasItem && !listRef.current.contains(focusedElement)) {\n      if (_focusFirstItem) list.focus(list.first());else list.focus(null);\n    }\n  });\n  var context = (0, _react.useMemo)(function () {\n    return {\n      map: map,\n      focusedItem: focusedItem,\n      activeId: activeId\n    };\n  }, [focusedItem, activeId]);\n  list.context = context;\n  list.getFocused = (0, _react.useCallback)(function () {\n    return focusedItem;\n  }, [focusedItem]);\n\n  list.hasFocused = function () {\n    return focusedItem !== undefined;\n  };\n\n  return list;\n};\n\nexports.useFocusList = useFocusList;","map":{"version":3,"sources":["/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/react-widgets/cjs/FocusListContext.js"],"names":["exports","__esModule","useListOption","useFocusList","FocusListContext","_querySelectorAll","_interopRequireDefault","require","_react","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","createContext","defaultOpts","behavior","dataItem","ctx","useContext","prevElement","useRef","ref","useLayoutEffect","map","delete","current","focused","focusedItem","activeId","undefined","listRef","scope","anchorItem","focusFirstItem","_focusFirstItem","scopeSelector","_scopeSelector","useMemo","useState","setFocusedItem","itemSelector","trim","items","find","e","dataset","rwFocused","list","size","length","toDataItem","el","first","focus","last","next","nextIdx","indexOf","prev","Math","max","element","focusedElement","hasItem","contains","context","getFocused","useCallback","hasFocused"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.useListOption = useListOption;\nexports.useFocusList = exports.FocusListContext = void 0;\n\nvar _querySelectorAll = _interopRequireDefault(require(\"dom-helpers/querySelectorAll\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable react-hooks/exhaustive-deps */\nconst FocusListContext = /*#__PURE__*/_react.default.createContext(null);\n\nexports.FocusListContext = FocusListContext;\nconst defaultOpts = {\n  behavior: 'stop'\n};\n\nfunction useListOption(dataItem) {\n  const ctx = (0, _react.useContext)(FocusListContext);\n  const prevElement = (0, _react.useRef)(null); // this is a bit convoluted because we want to use a ref object, a callback ref\n  // causes an extra render which is fine except that it means the list hook for\n  // anchor items fires before elements are processed\n\n  const ref = (0, _react.useRef)(null);\n  (0, _react.useLayoutEffect)(() => () => {\n    ctx == null ? void 0 : ctx.map.delete(ref.current);\n  }, []);\n  (0, _react.useLayoutEffect)(() => {\n    if (prevElement.current !== ref.current) {\n      ctx == null ? void 0 : ctx.map.delete(prevElement.current);\n    }\n\n    prevElement.current = ref.current;\n\n    if (ref.current && (ctx == null ? void 0 : ctx.map.get(ref.current)) !== dataItem) {\n      ctx == null ? void 0 : ctx.map.set(ref.current, dataItem);\n    }\n  });\n  const focused = dataItem === (ctx == null ? void 0 : ctx.focusedItem);\n  return [ref, focused, focused ? ctx == null ? void 0 : ctx.activeId : undefined];\n}\n\nconst useFocusList = ({\n  scope: listRef,\n  anchorItem,\n  focusFirstItem: _focusFirstItem = false,\n  scopeSelector: _scopeSelector = '',\n  activeId\n}) => {\n  const map = (0, _react.useMemo)(() => new WeakMap(), []);\n  const [focusedItem, setFocusedItem] = (0, _react.useState)();\n  const itemSelector = `${_scopeSelector} [data-rw-focusable]`.trim();\n\n  const get = () => {\n    const items = (0, _querySelectorAll.default)(listRef.current, itemSelector);\n    return [items, items.find(e => e.dataset.rwFocused === '')];\n  };\n\n  const list = (0, _react.useMemo)(() => {\n    return {\n      size() {\n        const [items] = get();\n        return items.length;\n      },\n\n      get,\n      toDataItem: el => map.get(el),\n\n      first() {\n        const [[first]] = get();\n        return first;\n      },\n\n      focus(el) {\n        if (!el || map.has(el)) setFocusedItem(el ? map.get(el) : undefined);\n      },\n\n      last() {\n        const [items] = get();\n        return items[items.length - 1];\n      },\n\n      next({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = items.indexOf(focusedItem) + 1;\n\n        if (nextIdx >= items.length) {\n          if (behavior === 'loop') return items[0];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      },\n\n      prev({\n        behavior\n      } = defaultOpts) {\n        const [items, focusedItem] = get();\n        let nextIdx = Math.max(0, items.indexOf(focusedItem)) - 1;\n\n        if (nextIdx < 0) {\n          if (behavior === 'loop') return items[items.length - 1];\n          if (behavior === 'clear') return undefined;\n          return focusedItem;\n        }\n\n        return items[nextIdx];\n      }\n\n    };\n  }, []);\n  (0, _react.useLayoutEffect)(() => {\n    if (!anchorItem) {\n      list.focus(null);\n      return;\n    }\n\n    const element = get()[0].find(el => list.toDataItem(el) === anchorItem);\n    list.focus(element);\n  }, [anchorItem]);\n  (0, _react.useLayoutEffect)(() => {\n    if (!listRef.current) return;\n    const [, focusedElement] = get();\n    const hasItem = focusedElement != null;\n\n    if (!hasItem && _focusFirstItem || hasItem && !listRef.current.contains(focusedElement)) {\n      if (_focusFirstItem) list.focus(list.first());else list.focus(null);\n    }\n  });\n  const context = (0, _react.useMemo)(() => ({\n    map,\n    focusedItem,\n    activeId\n  }), [focusedItem, activeId]);\n  list.context = context;\n  list.getFocused = (0, _react.useCallback)(() => focusedItem, [focusedItem]);\n\n  list.hasFocused = () => focusedItem !== undefined;\n\n  return list;\n};\n\nexports.useFocusList = useFocusList;"]},"metadata":{},"sourceType":"script"}