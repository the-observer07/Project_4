{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _closest = _interopRequireDefault(require(\"dom-helpers/closest\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _AddToListOption = _interopRequireWildcard(require(\"./AddToListOption\"));\n\nvar _Icon = require(\"./Icon\");\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar _MultiselectInput = _interopRequireDefault(require(\"./MultiselectInput\"));\n\nvar _MultiselectTagList = _interopRequireDefault(require(\"./MultiselectTagList\"));\n\nvar _Popup = _interopRequireDefault(require(\"./Popup\"));\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _WidgetPicker = _interopRequireDefault(require(\"./WidgetPicker\"));\n\nvar _messages = require(\"./messages\");\n\nvar _A11y = require(\"./A11y\");\n\nvar _Filter = require(\"./Filter\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _canShowCreate = _interopRequireDefault(require(\"./canShowCreate\"));\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _useDropdownToggle = _interopRequireDefault(require(\"./useDropdownToggle\"));\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _PickerCaret = _interopRequireDefault(require(\"./PickerCaret\"));\n\nconst _excluded = [\"dataKey\", \"textField\", \"autoFocus\", \"id\", \"value\", \"defaultValue\", \"onChange\", \"open\", \"defaultOpen\", \"onToggle\", \"focusFirstItem\", \"searchTerm\", \"defaultSearchTerm\", \"onSearch\", \"filter\", \"allowCreate\", \"className\", \"containerClassName\", \"placeholder\", \"busy\", \"disabled\", \"readOnly\", \"selectIcon\", \"clearTagIcon\", \"busySpinner\", \"dropUp\", \"tabIndex\", \"popupTransition\", \"showPlaceholderWithValues\", \"showSelectedItemsInList\", \"onSelect\", \"onCreate\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"inputProps\", \"listProps\", \"popupProps\", \"renderListItem\", \"renderListGroup\", \"renderTagValue\", \"optionComponent\", \"tagOptionComponent\", \"groupBy\", \"listComponent\", \"popupComponent\", \"tagListComponent\", \"data\", \"messages\"];\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst ENTER = 13;\nconst INSERT = 'insert';\nconst REMOVE = 'remove';\nlet propTypes = {\n  data: _propTypes.default.array,\n  //-- controlled props --\n  value: _propTypes.default.array,\n\n  /**\n   * @type {function (\n   *  dataItems: ?any[],\n   *  metadata: {\n   *    dataItem: any,\n   *    action: 'insert' | 'remove',\n   *    originalEvent: SyntheticEvent,\n   *    lastValue: ?any[],\n   *    searchTerm: ?string\n   *  }\n   * ): void}\n   */\n  onChange: _propTypes.default.func,\n  searchTerm: _propTypes.default.string,\n\n  /**\n   * @type {function (\n   *  searchTerm: ?string,\n   *  metadata: {\n   *    action: 'clear' | 'input',\n   *    lastSearchTerm: ?string,\n   *    originalEvent: SyntheticEvent,\n   *  }\n   * ): void}\n   */\n  onSearch: _propTypes.default.func,\n  open: _propTypes.default.bool,\n  handleOpen: _propTypes.default.func,\n  //-------------------------------------------\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  renderTagValue: _propTypes.default.func,\n  renderListItem: _propTypes.default.func,\n  renderListGroup: _propTypes.default.func,\n  groupBy: CustomPropTypes.accessor,\n  allowCreate: _propTypes.default.oneOf([true, false, 'onFilter']),\n\n  /**\n   *\n   * @type { (dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void }\n   */\n  onSelect: _propTypes.default.func,\n\n  /**\n   * @type { (searchTerm: string) => void }\n   */\n  onCreate: _propTypes.default.func,\n  busy: _propTypes.default.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: _propTypes.default.node,\n\n  /** Specify the element used to render tag clear icons. */\n  clearTagIcon: _propTypes.default.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: _propTypes.default.node,\n  dropUp: _propTypes.default.bool,\n  popupTransition: _propTypes.default.elementType,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: _propTypes.default.string,\n  inputProps: _propTypes.default.object,\n  listProps: _propTypes.default.object,\n  autoFocus: _propTypes.default.bool,\n  placeholder: _propTypes.default.string,\n\n  /** Continue to show the input placeholder even if tags are selected */\n  showPlaceholderWithValues: _propTypes.default.bool,\n\n  /** Continue to show the selected items in the dropdown list */\n  showSelectedItemsInList: _propTypes.default.bool,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n  messages: _propTypes.default.shape({\n    open: CustomPropTypes.message,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message,\n    createOption: CustomPropTypes.message,\n    tagsLabel: CustomPropTypes.message,\n    selectedItems: CustomPropTypes.message,\n    noneSelected: CustomPropTypes.message,\n    removeLabel: CustomPropTypes.message\n  })\n};\nconst EMPTY_ARRAY = [];\n\nfunction useMultiselectData() {\n  let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : EMPTY_ARRAY;\n  let data = arguments.length > 1 ? arguments[1] : undefined;\n  let accessors = arguments.length > 2 ? arguments[2] : undefined;\n  let filter = arguments.length > 3 ? arguments[3] : undefined;\n  let searchTerm = arguments.length > 4 ? arguments[4] : undefined;\n  let showSelectedItemsInList = arguments.length > 5 ? arguments[5] : undefined;\n  data = (0, _react.useMemo)(() => showSelectedItemsInList ? data : data.filter(i => !value.some(v => accessors.matches(i, v))), [data, showSelectedItemsInList, value, accessors]);\n  return [(0, _Filter.useFilteredData)(data, filter || false, searchTerm, accessors.text), data.length];\n}\n/**\n * ---\n * shortcuts:\n *   - { key: left arrow, label: move focus to previous tag }\n *   - { key: right arrow, label: move focus to next tag }\n *   - { key: delete, deselect focused tag }\n *   - { key: backspace, deselect next tag }\n *   - { key: alt + up arrow, label: close Multiselect }\n *   - { key: down arrow, label: open Multiselect, and move focus to next item }\n *   - { key: up arrow, label: move focus to previous item }\n *   - { key: home, label: move focus to first item }\n *   - { key: end, label: move focus to last item }\n *   - { key: enter, label: select focused item }\n *   - { key: ctrl + enter, label: create new tag from current searchTerm }\n *   - { key: any key, label: search list for item starting with key }\n * ---\n *\n * A select listbox alternative.\n *\n * @public\n */\n\n\nconst Multiselect = /*#__PURE__*/_react.default.forwardRef(function Multiselect(_ref, outerRef) {\n  let {\n    dataKey,\n    textField,\n    autoFocus,\n    id,\n    value,\n    defaultValue = [],\n    onChange,\n    open,\n    defaultOpen = false,\n    onToggle,\n    focusFirstItem = false,\n    searchTerm,\n    defaultSearchTerm = '',\n    onSearch,\n    filter = 'startsWith',\n    allowCreate = false,\n    className,\n    containerClassName,\n    placeholder,\n    busy,\n    disabled,\n    readOnly,\n    selectIcon,\n    clearTagIcon = _Icon.times,\n    busySpinner,\n    dropUp,\n    tabIndex,\n    popupTransition,\n    showPlaceholderWithValues = false,\n    showSelectedItemsInList = false,\n    onSelect,\n    onCreate,\n    onKeyDown,\n    onBlur,\n    onFocus,\n    inputProps,\n    listProps,\n    popupProps,\n    renderListItem,\n    renderListGroup,\n    renderTagValue,\n    optionComponent,\n    tagOptionComponent,\n    groupBy,\n    listComponent: ListComponent = _List.default,\n    popupComponent: Popup = _Popup.default,\n    tagListComponent: TagList = _MultiselectTagList.default,\n    data: rawData = [],\n    messages: userMessages\n  } = _ref,\n      elementProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  let [currentValue, handleChange] = (0, _uncontrollable.useUncontrolledProp)(value, defaultValue, onChange);\n  const [currentOpen, handleOpen] = (0, _uncontrollable.useUncontrolledProp)(open, defaultOpen, onToggle);\n  const [currentSearch, handleSearch] = (0, _uncontrollable.useUncontrolledProp)(searchTerm, defaultSearchTerm, onSearch);\n  const ref = (0, _react.useRef)(null);\n  const inputRef = (0, _react.useRef)(null);\n  const listRef = (0, _react.useRef)(null);\n  const inputId = (0, _WidgetHelpers.useInstanceId)(id, '_input');\n  const tagsId = (0, _WidgetHelpers.useInstanceId)(id, '_taglist');\n  const listId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox');\n  const createId = (0, _WidgetHelpers.useInstanceId)(id, '_createlist_option');\n  const activeTagId = (0, _WidgetHelpers.useInstanceId)(id, '_taglist_active_tag');\n  const activeOptionId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox_active_option');\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const messages = (0, _messages.useMessagesWithDefaults)(userMessages);\n  const toggle = (0, _useDropdownToggle.default)(currentOpen, handleOpen);\n  const isDisabled = disabled === true;\n  const isReadOnly = !!readOnly;\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused, event) {\n      if (focused) return focus();\n      toggle.close();\n      clearSearch(event);\n      tagList.focus(null);\n    }\n\n  });\n  const dataItems = (0, _react.useMemo)(() => currentValue.map(item => accessors.findOrSelf(rawData, item)), [rawData, currentValue, accessors]);\n  const [data, lengthWithoutValues] = useMultiselectData(dataItems, rawData, accessors, currentOpen ? filter : false, currentSearch, showSelectedItemsInList);\n  const list = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    scopeSelector: '.rw-popup',\n    focusFirstItem,\n    activeId: activeOptionId,\n    anchorItem: currentOpen ? dataItems[dataItems.length - 1] : undefined\n  });\n  const tagList = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    scopeSelector: '.rw-multiselect-taglist',\n    activeId: activeTagId\n  });\n  const showCreateOption = (0, _canShowCreate.default)(allowCreate, {\n    searchTerm: currentSearch,\n    data,\n    dataItems,\n    accessors\n  });\n  /**\n   * Update aria when it changes on update\n   */\n\n  const focusedTag = tagList.getFocused();\n  (0, _react.useEffect)(() => {\n    if (currentOpen) return;\n    (0, _A11y.setActiveDescendant)(inputRef.current, focusedTag ? activeTagId : '');\n  }, [activeTagId, currentOpen, focusedTag]);\n  const focusedItem = list.getFocused();\n  (0, _react.useEffect)(() => {\n    if (!currentOpen) return; // if (focusedItem) tagList.focus(null)\n\n    (0, _A11y.setActiveDescendant)(inputRef.current, focusedItem ? activeOptionId : '');\n  }, [activeOptionId, currentOpen, focusedItem]);\n  /**\n   * Event Handlers\n   */\n\n  const handleDelete = (dataItem, event) => {\n    if (isDisabled || readOnly || tagList.size() === 0) return;\n    focus();\n    change(dataItem, event, REMOVE);\n  };\n\n  const deletingRef = (0, _react.useRef)(false);\n\n  const handleSearchKeyDown = e => {\n    if (e.key === 'Backspace' && e.currentTarget.value && !deletingRef.current) deletingRef.current = true;\n  };\n\n  const handleSearchKeyUp = e => {\n    if (e.key === 'Backspace' && deletingRef.current) {\n      deletingRef.current = false;\n    }\n  };\n\n  const handleInputChange = e => {\n    search(e.target.value, e, 'input');\n    toggle.open();\n  };\n\n  const handleClick = e => {\n    if (isDisabled || readOnly) return; // prevents double clicks when in a <label>\n\n    e.preventDefault();\n    focus();\n\n    if ((0, _closest.default)(e.target, '.rw-select') && currentOpen) {\n      toggle.close();\n    } else toggle.open();\n  };\n\n  const handleDoubleClick = () => {\n    if (isDisabled || !inputRef.current) return;\n    focus();\n    if (inputRef.current) inputRef.current.select();\n  };\n\n  const handleSelect = (dataItem, originalEvent) => {\n    if (dataItem === undefined) return;\n    originalEvent.preventDefault();\n\n    if (dataItem === _AddToListOption.CREATE_OPTION) {\n      handleCreate(originalEvent);\n      return;\n    }\n\n    (0, _WidgetHelpers.notify)(onSelect, [dataItem, {\n      originalEvent\n    }]);\n\n    if (!showSelectedItemsInList || !dataItems.includes(dataItem)) {\n      change(dataItem, originalEvent, INSERT);\n    } else {\n      change(dataItem, originalEvent, REMOVE);\n    }\n\n    focus();\n  };\n\n  const handleCreate = event => {\n    (0, _WidgetHelpers.notify)(onCreate, [currentSearch]);\n    clearSearch(event);\n    focus();\n  };\n\n  const handleKeyDown = event => {\n    if (readOnly) {\n      event.preventDefault();\n      return;\n    }\n\n    let {\n      key,\n      keyCode,\n      altKey,\n      ctrlKey\n    } = event;\n    (0, _WidgetHelpers.notify)(onKeyDown, [event]);\n    if (event.defaultPrevented) return;\n\n    if (key === 'ArrowDown') {\n      event.preventDefault();\n\n      if (!currentOpen) {\n        toggle.open();\n        return;\n      }\n\n      list.focus(list.next());\n      tagList.focus(null);\n    } else if (key === 'ArrowUp' && (currentOpen || altKey)) {\n      event.preventDefault();\n\n      if (altKey) {\n        toggle.close();\n        return;\n      }\n\n      list.focus(list.prev());\n      tagList.focus(null);\n    } else if (key === 'End') {\n      event.preventDefault();\n\n      if (currentOpen) {\n        list.focus(list.last());\n        tagList.focus(null);\n      } else {\n        tagList.focus(tagList.last());\n        list.focus(null);\n      }\n    } else if (key === 'Home') {\n      event.preventDefault();\n      if (currentOpen) list.focus(list.first());else list.focus(tagList.first());\n    } else if (currentOpen && keyCode === ENTER) {\n      // using keyCode to ignore enter for japanese IME\n      event.preventDefault();\n\n      if (ctrlKey && showCreateOption) {\n        return handleCreate(event);\n      }\n\n      handleSelect(list.getFocused(), event);\n    } else if (key === 'Escape') {\n      if (currentOpen) toggle.close();else tagList.focus(null); //\n    } else if (!currentSearch && !deletingRef.current) {\n      //\n      if (key === 'ArrowLeft') {\n        tagList.focus(tagList.prev({\n          behavior: 'loop'\n        }));\n      } else if (key === 'ArrowRight') {\n        tagList.focus(tagList.next({\n          behavior: 'loop'\n        })); //\n      } else if (key === 'Delete' && tagList.getFocused()) {\n        handleDelete(tagList.getFocused(), event); //\n      } else if (key === 'Backspace') {\n        handleDelete(tagList.toDataItem(tagList.last()), event);\n      } else if (key === ' ' && !currentOpen) {\n        event.preventDefault();\n        toggle.open();\n      }\n    }\n  };\n  /**\n   * Methods\n   */\n\n\n  function change(dataItem, originalEvent, action) {\n    let nextDataItems = dataItems;\n\n    switch (action) {\n      case INSERT:\n        nextDataItems = nextDataItems.concat(dataItem);\n        break;\n\n      case REMOVE:\n        nextDataItems = nextDataItems.filter(d => d !== dataItem);\n        break;\n    }\n\n    handleChange(nextDataItems, {\n      action,\n      dataItem,\n      originalEvent,\n      searchTerm: currentSearch,\n      lastValue: currentValue\n    });\n    clearSearch(originalEvent);\n  }\n\n  function clearSearch(originalEvent) {\n    search('', originalEvent, 'clear');\n  }\n\n  function search(nextSearchTerm, originalEvent) {\n    let action = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'input';\n    if (nextSearchTerm !== currentSearch) handleSearch(nextSearchTerm, {\n      action,\n      originalEvent,\n      lastSearchTerm: currentSearch\n    });\n  }\n\n  function focus() {\n    if (inputRef.current) inputRef.current.focus();\n  }\n  /**\n   * Render\n   */\n\n\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    focus\n  }));\n  let shouldRenderPopup = (0, _WidgetHelpers.useFirstFocusedRender)(focused, currentOpen);\n  let shouldRenderTags = !!dataItems.length;\n  let inputOwns = `${listId} ` + (shouldRenderTags ? tagsId : '') + (showCreateOption ? createId : '');\n  return /*#__PURE__*/_react.default.createElement(_Widget.default, _extends({}, elementProps, {\n    ref: ref,\n    open: currentOpen,\n    dropUp: dropUp,\n    focused: focused,\n    disabled: isDisabled,\n    readOnly: isReadOnly,\n    onKeyDown: handleKeyDown\n  }, focusEvents, {\n    className: (0, _classnames.default)(className, 'rw-multiselect')\n  }), /*#__PURE__*/_react.default.createElement(_WidgetPicker.default, {\n    onClick: handleClick,\n    onTouchEnd: handleClick,\n    onDoubleClick: handleDoubleClick,\n    className: (0, _classnames.default)(containerClassName, 'rw-widget-input')\n  }, /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: tagList.context\n  }, /*#__PURE__*/_react.default.createElement(TagList, {\n    id: tagsId,\n    textAccessor: accessors.text,\n    clearTagIcon: clearTagIcon,\n    label: messages.tagsLabel(),\n    value: dataItems,\n    readOnly: isReadOnly,\n    disabled: disabled,\n    onDelete: handleDelete,\n    tagOptionComponent: tagOptionComponent,\n    renderTagValue: renderTagValue\n  }, /*#__PURE__*/_react.default.createElement(_MultiselectInput.default, _extends({}, inputProps, {\n    role: \"combobox\",\n    autoFocus: autoFocus,\n    tabIndex: tabIndex || 0,\n    \"aria-expanded\": !!currentOpen,\n    \"aria-busy\": !!busy,\n    \"aria-owns\": inputOwns,\n    \"aria-controls\": listId,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-autocomplete\": \"list\",\n    value: currentSearch,\n    disabled: isDisabled,\n    readOnly: isReadOnly,\n    placeholder: (currentValue.length && !showPlaceholderWithValues ? '' : placeholder) || '',\n    onKeyDown: handleSearchKeyDown,\n    onKeyUp: handleSearchKeyUp,\n    onChange: handleInputChange,\n    ref: inputRef\n  })))), /*#__PURE__*/_react.default.createElement(_PickerCaret.default, {\n    busy: busy,\n    spinner: busySpinner,\n    icon: selectIcon,\n    visible: focused\n  })), /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, shouldRenderPopup && /*#__PURE__*/_react.default.createElement(Popup, _extends({}, popupProps, {\n    dropUp: dropUp,\n    open: currentOpen,\n    transition: popupTransition,\n    onEntering: () => listRef.current.scrollIntoView()\n  }), /*#__PURE__*/_react.default.createElement(ListComponent, _extends({}, listProps, {\n    id: listId,\n    data: data,\n    tabIndex: -1,\n    disabled: disabled,\n    searchTerm: currentSearch,\n    accessors: accessors,\n    renderItem: renderListItem,\n    renderGroup: renderListGroup,\n    value: dataItems,\n    groupBy: groupBy,\n    optionComponent: optionComponent,\n    onChange: (d, meta) => handleSelect(d, meta.originalEvent),\n    \"aria-live\": \"polite\",\n    \"aria-labelledby\": inputId,\n    \"aria-hidden\": !currentOpen,\n    ref: listRef,\n    messages: {\n      emptyList: lengthWithoutValues ? messages.emptyFilter : messages.emptyList\n    }\n  })), showCreateOption && /*#__PURE__*/_react.default.createElement(_AddToListOption.default, {\n    onSelect: handleCreate\n  }, messages.createOption(currentValue, currentSearch)))));\n});\n\nMultiselect.displayName = 'Multiselect';\nMultiselect.propTypes = propTypes;\nvar _default = Multiselect;\nexports.default = _default;","map":{"version":3,"sources":["/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/react-widgets/cjs/Multiselect.js"],"names":["exports","__esModule","default","_classnames","_interopRequireDefault","require","_closest","_propTypes","_react","_interopRequireWildcard","_uncontrollable","_AddToListOption","_Icon","_List","_FocusListContext","_MultiselectInput","_MultiselectTagList","_Popup","_Widget","_WidgetPicker","_messages","_A11y","_Filter","CustomPropTypes","_canShowCreate","_Accessors","_useDropdownToggle","_useFocusManager","_WidgetHelpers","_PickerCaret","_excluded","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","ENTER","INSERT","REMOVE","propTypes","data","array","value","onChange","func","searchTerm","string","onSearch","open","bool","handleOpen","dataKey","accessor","textField","renderTagValue","renderListItem","renderListGroup","groupBy","allowCreate","oneOf","onSelect","onCreate","busy","selectIcon","node","clearTagIcon","busySpinner","dropUp","popupTransition","elementType","containerClassName","inputProps","object","listProps","autoFocus","placeholder","showPlaceholderWithValues","showSelectedItemsInList","disabled","acceptsArray","readOnly","messages","shape","message","emptyList","emptyFilter","createOption","tagsLabel","selectedItems","noneSelected","removeLabel","EMPTY_ARRAY","useMultiselectData","accessors","filter","useMemo","some","v","matches","useFilteredData","text","Multiselect","forwardRef","_ref","outerRef","id","defaultValue","defaultOpen","onToggle","focusFirstItem","defaultSearchTerm","className","times","tabIndex","onKeyDown","onBlur","onFocus","popupProps","optionComponent","tagOptionComponent","listComponent","ListComponent","popupComponent","Popup","tagListComponent","TagList","rawData","userMessages","elementProps","currentValue","handleChange","useUncontrolledProp","currentOpen","currentSearch","handleSearch","ref","useRef","inputRef","listRef","inputId","useInstanceId","tagsId","listId","createId","activeTagId","activeOptionId","useAccessors","useMessagesWithDefaults","toggle","isDisabled","isReadOnly","focusEvents","focused","didHandle","event","focus","close","clearSearch","tagList","dataItems","map","item","findOrSelf","lengthWithoutValues","list","useFocusList","scope","scopeSelector","activeId","anchorItem","undefined","showCreateOption","focusedTag","getFocused","useEffect","setActiveDescendant","current","focusedItem","handleDelete","dataItem","size","change","deletingRef","handleSearchKeyDown","e","currentTarget","handleSearchKeyUp","handleInputChange","search","handleClick","preventDefault","handleDoubleClick","select","handleSelect","originalEvent","CREATE_OPTION","handleCreate","notify","includes","handleKeyDown","keyCode","altKey","ctrlKey","defaultPrevented","next","prev","last","first","behavior","toDataItem","action","nextDataItems","concat","d","lastValue","nextSearchTerm","lastSearchTerm","useImperativeHandle","shouldRenderPopup","useFirstFocusedRender","shouldRenderTags","inputOwns","createElement","onClick","onTouchEnd","onDoubleClick","FocusListContext","Provider","context","textAccessor","label","onDelete","role","onKeyUp","spinner","icon","visible","transition","onEntering","scrollIntoView","renderItem","renderGroup","meta","displayName","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _closest = _interopRequireDefault(require(\"dom-helpers/closest\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _uncontrollable = require(\"uncontrollable\");\n\nvar _AddToListOption = _interopRequireWildcard(require(\"./AddToListOption\"));\n\nvar _Icon = require(\"./Icon\");\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _FocusListContext = require(\"./FocusListContext\");\n\nvar _MultiselectInput = _interopRequireDefault(require(\"./MultiselectInput\"));\n\nvar _MultiselectTagList = _interopRequireDefault(require(\"./MultiselectTagList\"));\n\nvar _Popup = _interopRequireDefault(require(\"./Popup\"));\n\nvar _Widget = _interopRequireDefault(require(\"./Widget\"));\n\nvar _WidgetPicker = _interopRequireDefault(require(\"./WidgetPicker\"));\n\nvar _messages = require(\"./messages\");\n\nvar _A11y = require(\"./A11y\");\n\nvar _Filter = require(\"./Filter\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _canShowCreate = _interopRequireDefault(require(\"./canShowCreate\"));\n\nvar _Accessors = require(\"./Accessors\");\n\nvar _useDropdownToggle = _interopRequireDefault(require(\"./useDropdownToggle\"));\n\nvar _useFocusManager = _interopRequireDefault(require(\"./useFocusManager\"));\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _PickerCaret = _interopRequireDefault(require(\"./PickerCaret\"));\n\nconst _excluded = [\"dataKey\", \"textField\", \"autoFocus\", \"id\", \"value\", \"defaultValue\", \"onChange\", \"open\", \"defaultOpen\", \"onToggle\", \"focusFirstItem\", \"searchTerm\", \"defaultSearchTerm\", \"onSearch\", \"filter\", \"allowCreate\", \"className\", \"containerClassName\", \"placeholder\", \"busy\", \"disabled\", \"readOnly\", \"selectIcon\", \"clearTagIcon\", \"busySpinner\", \"dropUp\", \"tabIndex\", \"popupTransition\", \"showPlaceholderWithValues\", \"showSelectedItemsInList\", \"onSelect\", \"onCreate\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"inputProps\", \"listProps\", \"popupProps\", \"renderListItem\", \"renderListGroup\", \"renderTagValue\", \"optionComponent\", \"tagOptionComponent\", \"groupBy\", \"listComponent\", \"popupComponent\", \"tagListComponent\", \"data\", \"messages\"];\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst ENTER = 13;\nconst INSERT = 'insert';\nconst REMOVE = 'remove';\nlet propTypes = {\n  data: _propTypes.default.array,\n  //-- controlled props --\n  value: _propTypes.default.array,\n\n  /**\n   * @type {function (\n   *  dataItems: ?any[],\n   *  metadata: {\n   *    dataItem: any,\n   *    action: 'insert' | 'remove',\n   *    originalEvent: SyntheticEvent,\n   *    lastValue: ?any[],\n   *    searchTerm: ?string\n   *  }\n   * ): void}\n   */\n  onChange: _propTypes.default.func,\n  searchTerm: _propTypes.default.string,\n\n  /**\n   * @type {function (\n   *  searchTerm: ?string,\n   *  metadata: {\n   *    action: 'clear' | 'input',\n   *    lastSearchTerm: ?string,\n   *    originalEvent: SyntheticEvent,\n   *  }\n   * ): void}\n   */\n  onSearch: _propTypes.default.func,\n  open: _propTypes.default.bool,\n  handleOpen: _propTypes.default.func,\n  //-------------------------------------------\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  renderTagValue: _propTypes.default.func,\n  renderListItem: _propTypes.default.func,\n  renderListGroup: _propTypes.default.func,\n  groupBy: CustomPropTypes.accessor,\n  allowCreate: _propTypes.default.oneOf([true, false, 'onFilter']),\n\n  /**\n   *\n   * @type { (dataItem: ?any, metadata: { originalEvent: SyntheticEvent }) => void }\n   */\n  onSelect: _propTypes.default.func,\n\n  /**\n   * @type { (searchTerm: string) => void }\n   */\n  onCreate: _propTypes.default.func,\n  busy: _propTypes.default.bool,\n\n  /** Specify the element used to render the select (down arrow) icon. */\n  selectIcon: _propTypes.default.node,\n\n  /** Specify the element used to render tag clear icons. */\n  clearTagIcon: _propTypes.default.node,\n\n  /** Specify the element used to render the busy indicator */\n  busySpinner: _propTypes.default.node,\n  dropUp: _propTypes.default.bool,\n  popupTransition: _propTypes.default.elementType,\n\n  /** Adds a css class to the input container element. */\n  containerClassName: _propTypes.default.string,\n  inputProps: _propTypes.default.object,\n  listProps: _propTypes.default.object,\n  autoFocus: _propTypes.default.bool,\n  placeholder: _propTypes.default.string,\n\n  /** Continue to show the input placeholder even if tags are selected */\n  showPlaceholderWithValues: _propTypes.default.bool,\n\n  /** Continue to show the selected items in the dropdown list */\n  showSelectedItemsInList: _propTypes.default.bool,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  readOnly: CustomPropTypes.disabled,\n  messages: _propTypes.default.shape({\n    open: CustomPropTypes.message,\n    emptyList: CustomPropTypes.message,\n    emptyFilter: CustomPropTypes.message,\n    createOption: CustomPropTypes.message,\n    tagsLabel: CustomPropTypes.message,\n    selectedItems: CustomPropTypes.message,\n    noneSelected: CustomPropTypes.message,\n    removeLabel: CustomPropTypes.message\n  })\n};\nconst EMPTY_ARRAY = [];\n\nfunction useMultiselectData(value = EMPTY_ARRAY, data, accessors, filter, searchTerm, showSelectedItemsInList) {\n  data = (0, _react.useMemo)(() => showSelectedItemsInList ? data : data.filter(i => !value.some(v => accessors.matches(i, v))), [data, showSelectedItemsInList, value, accessors]);\n  return [(0, _Filter.useFilteredData)(data, filter || false, searchTerm, accessors.text), data.length];\n}\n\n/**\n * ---\n * shortcuts:\n *   - { key: left arrow, label: move focus to previous tag }\n *   - { key: right arrow, label: move focus to next tag }\n *   - { key: delete, deselect focused tag }\n *   - { key: backspace, deselect next tag }\n *   - { key: alt + up arrow, label: close Multiselect }\n *   - { key: down arrow, label: open Multiselect, and move focus to next item }\n *   - { key: up arrow, label: move focus to previous item }\n *   - { key: home, label: move focus to first item }\n *   - { key: end, label: move focus to last item }\n *   - { key: enter, label: select focused item }\n *   - { key: ctrl + enter, label: create new tag from current searchTerm }\n *   - { key: any key, label: search list for item starting with key }\n * ---\n *\n * A select listbox alternative.\n *\n * @public\n */\nconst Multiselect = /*#__PURE__*/_react.default.forwardRef(function Multiselect(_ref, outerRef) {\n  let {\n    dataKey,\n    textField,\n    autoFocus,\n    id,\n    value,\n    defaultValue = [],\n    onChange,\n    open,\n    defaultOpen = false,\n    onToggle,\n    focusFirstItem = false,\n    searchTerm,\n    defaultSearchTerm = '',\n    onSearch,\n    filter = 'startsWith',\n    allowCreate = false,\n    className,\n    containerClassName,\n    placeholder,\n    busy,\n    disabled,\n    readOnly,\n    selectIcon,\n    clearTagIcon = _Icon.times,\n    busySpinner,\n    dropUp,\n    tabIndex,\n    popupTransition,\n    showPlaceholderWithValues = false,\n    showSelectedItemsInList = false,\n    onSelect,\n    onCreate,\n    onKeyDown,\n    onBlur,\n    onFocus,\n    inputProps,\n    listProps,\n    popupProps,\n    renderListItem,\n    renderListGroup,\n    renderTagValue,\n    optionComponent,\n    tagOptionComponent,\n    groupBy,\n    listComponent: ListComponent = _List.default,\n    popupComponent: Popup = _Popup.default,\n    tagListComponent: TagList = _MultiselectTagList.default,\n    data: rawData = [],\n    messages: userMessages\n  } = _ref,\n      elementProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  let [currentValue, handleChange] = (0, _uncontrollable.useUncontrolledProp)(value, defaultValue, onChange);\n  const [currentOpen, handleOpen] = (0, _uncontrollable.useUncontrolledProp)(open, defaultOpen, onToggle);\n  const [currentSearch, handleSearch] = (0, _uncontrollable.useUncontrolledProp)(searchTerm, defaultSearchTerm, onSearch);\n  const ref = (0, _react.useRef)(null);\n  const inputRef = (0, _react.useRef)(null);\n  const listRef = (0, _react.useRef)(null);\n  const inputId = (0, _WidgetHelpers.useInstanceId)(id, '_input');\n  const tagsId = (0, _WidgetHelpers.useInstanceId)(id, '_taglist');\n  const listId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox');\n  const createId = (0, _WidgetHelpers.useInstanceId)(id, '_createlist_option');\n  const activeTagId = (0, _WidgetHelpers.useInstanceId)(id, '_taglist_active_tag');\n  const activeOptionId = (0, _WidgetHelpers.useInstanceId)(id, '_listbox_active_option');\n  const accessors = (0, _Accessors.useAccessors)(textField, dataKey);\n  const messages = (0, _messages.useMessagesWithDefaults)(userMessages);\n  const toggle = (0, _useDropdownToggle.default)(currentOpen, handleOpen);\n  const isDisabled = disabled === true;\n  const isReadOnly = !!readOnly;\n  const [focusEvents, focused] = (0, _useFocusManager.default)(ref, {\n    disabled: isDisabled,\n    onBlur,\n    onFocus\n  }, {\n    didHandle(focused, event) {\n      if (focused) return focus();\n      toggle.close();\n      clearSearch(event);\n      tagList.focus(null);\n    }\n\n  });\n  const dataItems = (0, _react.useMemo)(() => currentValue.map(item => accessors.findOrSelf(rawData, item)), [rawData, currentValue, accessors]);\n  const [data, lengthWithoutValues] = useMultiselectData(dataItems, rawData, accessors, currentOpen ? filter : false, currentSearch, showSelectedItemsInList);\n  const list = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    scopeSelector: '.rw-popup',\n    focusFirstItem,\n    activeId: activeOptionId,\n    anchorItem: currentOpen ? dataItems[dataItems.length - 1] : undefined\n  });\n  const tagList = (0, _FocusListContext.useFocusList)({\n    scope: ref,\n    scopeSelector: '.rw-multiselect-taglist',\n    activeId: activeTagId\n  });\n  const showCreateOption = (0, _canShowCreate.default)(allowCreate, {\n    searchTerm: currentSearch,\n    data,\n    dataItems,\n    accessors\n  });\n  /**\n   * Update aria when it changes on update\n   */\n\n  const focusedTag = tagList.getFocused();\n  (0, _react.useEffect)(() => {\n    if (currentOpen) return;\n    (0, _A11y.setActiveDescendant)(inputRef.current, focusedTag ? activeTagId : '');\n  }, [activeTagId, currentOpen, focusedTag]);\n  const focusedItem = list.getFocused();\n  (0, _react.useEffect)(() => {\n    if (!currentOpen) return; // if (focusedItem) tagList.focus(null)\n\n    (0, _A11y.setActiveDescendant)(inputRef.current, focusedItem ? activeOptionId : '');\n  }, [activeOptionId, currentOpen, focusedItem]);\n  /**\n   * Event Handlers\n   */\n\n  const handleDelete = (dataItem, event) => {\n    if (isDisabled || readOnly || tagList.size() === 0) return;\n    focus();\n    change(dataItem, event, REMOVE);\n  };\n\n  const deletingRef = (0, _react.useRef)(false);\n\n  const handleSearchKeyDown = e => {\n    if (e.key === 'Backspace' && e.currentTarget.value && !deletingRef.current) deletingRef.current = true;\n  };\n\n  const handleSearchKeyUp = e => {\n    if (e.key === 'Backspace' && deletingRef.current) {\n      deletingRef.current = false;\n    }\n  };\n\n  const handleInputChange = e => {\n    search(e.target.value, e, 'input');\n    toggle.open();\n  };\n\n  const handleClick = e => {\n    if (isDisabled || readOnly) return; // prevents double clicks when in a <label>\n\n    e.preventDefault();\n    focus();\n\n    if ((0, _closest.default)(e.target, '.rw-select') && currentOpen) {\n      toggle.close();\n    } else toggle.open();\n  };\n\n  const handleDoubleClick = () => {\n    if (isDisabled || !inputRef.current) return;\n    focus();\n    if (inputRef.current) inputRef.current.select();\n  };\n\n  const handleSelect = (dataItem, originalEvent) => {\n    if (dataItem === undefined) return;\n    originalEvent.preventDefault();\n\n    if (dataItem === _AddToListOption.CREATE_OPTION) {\n      handleCreate(originalEvent);\n      return;\n    }\n\n    (0, _WidgetHelpers.notify)(onSelect, [dataItem, {\n      originalEvent\n    }]);\n\n    if (!showSelectedItemsInList || !dataItems.includes(dataItem)) {\n      change(dataItem, originalEvent, INSERT);\n    } else {\n      change(dataItem, originalEvent, REMOVE);\n    }\n\n    focus();\n  };\n\n  const handleCreate = event => {\n    (0, _WidgetHelpers.notify)(onCreate, [currentSearch]);\n    clearSearch(event);\n    focus();\n  };\n\n  const handleKeyDown = event => {\n    if (readOnly) {\n      event.preventDefault();\n      return;\n    }\n\n    let {\n      key,\n      keyCode,\n      altKey,\n      ctrlKey\n    } = event;\n    (0, _WidgetHelpers.notify)(onKeyDown, [event]);\n    if (event.defaultPrevented) return;\n\n    if (key === 'ArrowDown') {\n      event.preventDefault();\n\n      if (!currentOpen) {\n        toggle.open();\n        return;\n      }\n\n      list.focus(list.next());\n      tagList.focus(null);\n    } else if (key === 'ArrowUp' && (currentOpen || altKey)) {\n      event.preventDefault();\n\n      if (altKey) {\n        toggle.close();\n        return;\n      }\n\n      list.focus(list.prev());\n      tagList.focus(null);\n    } else if (key === 'End') {\n      event.preventDefault();\n\n      if (currentOpen) {\n        list.focus(list.last());\n        tagList.focus(null);\n      } else {\n        tagList.focus(tagList.last());\n        list.focus(null);\n      }\n    } else if (key === 'Home') {\n      event.preventDefault();\n      if (currentOpen) list.focus(list.first());else list.focus(tagList.first());\n    } else if (currentOpen && keyCode === ENTER) {\n      // using keyCode to ignore enter for japanese IME\n      event.preventDefault();\n\n      if (ctrlKey && showCreateOption) {\n        return handleCreate(event);\n      }\n\n      handleSelect(list.getFocused(), event);\n    } else if (key === 'Escape') {\n      if (currentOpen) toggle.close();else tagList.focus(null); //\n    } else if (!currentSearch && !deletingRef.current) {\n      //\n      if (key === 'ArrowLeft') {\n        tagList.focus(tagList.prev({\n          behavior: 'loop'\n        }));\n      } else if (key === 'ArrowRight') {\n        tagList.focus(tagList.next({\n          behavior: 'loop'\n        })); //\n      } else if (key === 'Delete' && tagList.getFocused()) {\n        handleDelete(tagList.getFocused(), event); //\n      } else if (key === 'Backspace') {\n        handleDelete(tagList.toDataItem(tagList.last()), event);\n      } else if (key === ' ' && !currentOpen) {\n        event.preventDefault();\n        toggle.open();\n      }\n    }\n  };\n  /**\n   * Methods\n   */\n\n\n  function change(dataItem, originalEvent, action) {\n    let nextDataItems = dataItems;\n\n    switch (action) {\n      case INSERT:\n        nextDataItems = nextDataItems.concat(dataItem);\n        break;\n\n      case REMOVE:\n        nextDataItems = nextDataItems.filter(d => d !== dataItem);\n        break;\n    }\n\n    handleChange(nextDataItems, {\n      action,\n      dataItem,\n      originalEvent,\n      searchTerm: currentSearch,\n      lastValue: currentValue\n    });\n    clearSearch(originalEvent);\n  }\n\n  function clearSearch(originalEvent) {\n    search('', originalEvent, 'clear');\n  }\n\n  function search(nextSearchTerm, originalEvent, action = 'input') {\n    if (nextSearchTerm !== currentSearch) handleSearch(nextSearchTerm, {\n      action,\n      originalEvent,\n      lastSearchTerm: currentSearch\n    });\n  }\n\n  function focus() {\n    if (inputRef.current) inputRef.current.focus();\n  }\n  /**\n   * Render\n   */\n\n\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    focus\n  }));\n  let shouldRenderPopup = (0, _WidgetHelpers.useFirstFocusedRender)(focused, currentOpen);\n  let shouldRenderTags = !!dataItems.length;\n  let inputOwns = `${listId} ` + (shouldRenderTags ? tagsId : '') + (showCreateOption ? createId : '');\n  return /*#__PURE__*/_react.default.createElement(_Widget.default, _extends({}, elementProps, {\n    ref: ref,\n    open: currentOpen,\n    dropUp: dropUp,\n    focused: focused,\n    disabled: isDisabled,\n    readOnly: isReadOnly,\n    onKeyDown: handleKeyDown\n  }, focusEvents, {\n    className: (0, _classnames.default)(className, 'rw-multiselect')\n  }), /*#__PURE__*/_react.default.createElement(_WidgetPicker.default, {\n    onClick: handleClick,\n    onTouchEnd: handleClick,\n    onDoubleClick: handleDoubleClick,\n    className: (0, _classnames.default)(containerClassName, 'rw-widget-input')\n  }, /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: tagList.context\n  }, /*#__PURE__*/_react.default.createElement(TagList, {\n    id: tagsId,\n    textAccessor: accessors.text,\n    clearTagIcon: clearTagIcon,\n    label: messages.tagsLabel(),\n    value: dataItems,\n    readOnly: isReadOnly,\n    disabled: disabled,\n    onDelete: handleDelete,\n    tagOptionComponent: tagOptionComponent,\n    renderTagValue: renderTagValue\n  }, /*#__PURE__*/_react.default.createElement(_MultiselectInput.default, _extends({}, inputProps, {\n    role: \"combobox\",\n    autoFocus: autoFocus,\n    tabIndex: tabIndex || 0,\n    \"aria-expanded\": !!currentOpen,\n    \"aria-busy\": !!busy,\n    \"aria-owns\": inputOwns,\n    \"aria-controls\": listId,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-autocomplete\": \"list\",\n    value: currentSearch,\n    disabled: isDisabled,\n    readOnly: isReadOnly,\n    placeholder: (currentValue.length && !showPlaceholderWithValues ? '' : placeholder) || '',\n    onKeyDown: handleSearchKeyDown,\n    onKeyUp: handleSearchKeyUp,\n    onChange: handleInputChange,\n    ref: inputRef\n  })))), /*#__PURE__*/_react.default.createElement(_PickerCaret.default, {\n    busy: busy,\n    spinner: busySpinner,\n    icon: selectIcon,\n    visible: focused\n  })), /*#__PURE__*/_react.default.createElement(_FocusListContext.FocusListContext.Provider, {\n    value: list.context\n  }, shouldRenderPopup && /*#__PURE__*/_react.default.createElement(Popup, _extends({}, popupProps, {\n    dropUp: dropUp,\n    open: currentOpen,\n    transition: popupTransition,\n    onEntering: () => listRef.current.scrollIntoView()\n  }), /*#__PURE__*/_react.default.createElement(ListComponent, _extends({}, listProps, {\n    id: listId,\n    data: data,\n    tabIndex: -1,\n    disabled: disabled,\n    searchTerm: currentSearch,\n    accessors: accessors,\n    renderItem: renderListItem,\n    renderGroup: renderListGroup,\n    value: dataItems,\n    groupBy: groupBy,\n    optionComponent: optionComponent,\n    onChange: (d, meta) => handleSelect(d, meta.originalEvent),\n    \"aria-live\": \"polite\",\n    \"aria-labelledby\": inputId,\n    \"aria-hidden\": !currentOpen,\n    ref: listRef,\n    messages: {\n      emptyList: lengthWithoutValues ? messages.emptyFilter : messages.emptyList\n    }\n  })), showCreateOption && /*#__PURE__*/_react.default.createElement(_AddToListOption.default, {\n    onSelect: handleCreate\n  }, messages.createOption(currentValue, currentSearch)))));\n});\n\nMultiselect.displayName = 'Multiselect';\nMultiselect.propTypes = propTypes;\nvar _default = Multiselect;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}