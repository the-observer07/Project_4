{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.useHandleSelect = useHandleSelect;\nexports.default = exports.useScrollFocusedIntoView = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _ListOption = _interopRequireDefault(require(\"./ListOption\"));\n\nvar _ListOptionGroup = _interopRequireDefault(require(\"./ListOptionGroup\"));\n\nvar _messages = require(\"./messages\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useMutationObserver = _interopRequireDefault(require(\"@restart/hooks/useMutationObserver\"));\n\nvar _useCallbackRef = _interopRequireDefault(require(\"@restart/hooks/useCallbackRef\"));\n\nvar _useMergedRefs = _interopRequireDefault(require(\"@restart/hooks/useMergedRefs\"));\n\nconst _excluded = [\"multiple\", \"data\", \"value\", \"onChange\", \"accessors\", \"className\", \"messages\", \"disabled\", \"renderItem\", \"renderGroup\", \"searchTerm\", \"groupBy\", \"elementRef\", \"optionComponent\", \"renderList\"];\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst whitelist = ['style', 'className', 'role', 'id', 'autocomplete', 'size', 'tabIndex', 'maxLength', 'name'];\nconst whitelistRegex = [/^aria-/, /^data-/, /^on[A-Z]\\w+/];\n\nfunction pickElementProps(props) {\n  const result = {};\n  Object.keys(props).forEach(key => {\n    if (whitelist.indexOf(key) !== -1 || whitelistRegex.some(r => !!key.match(r))) result[key] = props[key];\n  });\n  return result;\n}\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst useScrollFocusedIntoView = function (element) {\n  let observeChanges = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const scrollIntoView = (0, _react.useCallback)(() => {\n    if (!element) return;\n    let selectedItem = element.querySelector('[data-rw-focused]');\n\n    if (selectedItem && selectedItem.scrollIntoView) {\n      selectedItem.scrollIntoView({\n        block: 'nearest',\n        inline: 'nearest'\n      });\n    }\n  }, [element]);\n  (0, _useMutationObserver.default)(observeChanges ? element : null, {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['data-rw-focused']\n  }, scrollIntoView);\n  return scrollIntoView;\n};\n\nexports.useScrollFocusedIntoView = useScrollFocusedIntoView;\n\nfunction useHandleSelect(multiple, dataItems, onChange) {\n  return (dataItem, event) => {\n    if (multiple === false) {\n      onChange(dataItem, {\n        dataItem,\n        lastValue: dataItems[0],\n        originalEvent: event\n      });\n      return;\n    }\n\n    const checked = dataItems.includes(dataItem);\n    onChange(checked ? dataItems.filter(d => d !== dataItem) : [...dataItems, dataItem], {\n      dataItem,\n      lastValue: dataItems,\n      action: checked ? 'remove' : 'insert',\n      originalEvent: event\n    });\n  };\n}\n\nconst List = /*#__PURE__*/_react.default.forwardRef(function List(_ref, outerRef) {\n  var _elementProps$role;\n\n  let {\n    multiple = false,\n    data = [],\n    value,\n    onChange,\n    accessors,\n    className,\n    messages,\n    disabled,\n    renderItem,\n    renderGroup,\n    searchTerm,\n    groupBy,\n    elementRef,\n    optionComponent: Option = _ListOption.default,\n    renderList\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const id = (0, _WidgetHelpers.useInstanceId)();\n  const dataItems = (0, _.makeArray)(value, multiple);\n  const groupedData = (0, _react.useMemo)(() => groupBy ? (0, _.groupBySortedKeys)(groupBy, data) : undefined, [data, groupBy]);\n  const [element, ref] = (0, _useCallbackRef.default)();\n  const disabledItems = (0, _.toItemArray)(disabled);\n  const {\n    emptyList\n  } = (0, _messages.useMessagesWithDefaults)(messages);\n  const divRef = (0, _useMergedRefs.default)(ref, elementRef);\n  const handleSelect = useHandleSelect(multiple, dataItems, onChange);\n  const scrollIntoView = useScrollFocusedIntoView(element, true);\n  let elementProps = pickElementProps(props);\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    scrollIntoView\n  }), [scrollIntoView]);\n\n  function renderOption(item, idx) {\n    const textValue = accessors.text(item);\n    const itemIsDisabled = disabledItems.includes(item);\n    const itemIsSelected = dataItems.includes(item);\n    return /*#__PURE__*/_react.default.createElement(Option, {\n      dataItem: item,\n      key: `item_${idx}`,\n      searchTerm: searchTerm,\n      onSelect: handleSelect,\n      disabled: itemIsDisabled,\n      selected: itemIsSelected\n    }, renderItem ? renderItem({\n      item,\n      searchTerm,\n      index: idx,\n      text: textValue,\n      // TODO: probably remove\n      value: accessors.value(item),\n      disabled: itemIsDisabled\n    }) : textValue);\n  }\n\n  const items = groupedData ? groupedData.map((_ref2, idx) => {\n    let [group, items] = _ref2;\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      role: \"group\",\n      key: `group_${idx}`\n    }, /*#__PURE__*/_react.default.createElement(_ListOptionGroup.default, null, renderGroup ? renderGroup({\n      group\n    }) : group), items.map(renderOption));\n  }) : data.map(renderOption);\n  const rootProps = Object.assign({\n    id,\n    tabIndex: 0,\n    ref: divRef\n  }, elementProps, {\n    'aria-multiselectable': !!multiple,\n    className: (0, _classnames.default)(className, 'rw-list'),\n    role: (_elementProps$role = elementProps.role) != null ? _elementProps$role : 'listbox',\n    children: _react.default.Children.count(items) ? items : /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"rw-list-empty\"\n    }, emptyList())\n  });\n  return renderList ? renderList(rootProps) : /*#__PURE__*/_react.default.createElement(\"div\", rootProps);\n});\n\nList.displayName = 'List';\nList.propTypes = propTypes;\nvar _default = List;\nexports.default = _default;","map":{"version":3,"sources":["/Users/inspireadmin/Documents/GitHub/Project_2/node_modules/react-widgets/cjs/List.js"],"names":["exports","__esModule","useHandleSelect","default","useScrollFocusedIntoView","_classnames","_interopRequireDefault","require","_propTypes","_react","_interopRequireWildcard","_ListOption","_ListOptionGroup","_messages","CustomPropTypes","_","_WidgetHelpers","_useMutationObserver","_useCallbackRef","_useMergedRefs","_excluded","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","keys","i","length","indexOf","whitelist","whitelistRegex","pickElementProps","props","result","forEach","some","r","match","propTypes","data","array","dataKey","accessor","textField","onSelect","func","onMove","onHoverOption","optionComponent","elementType","renderItem","renderGroup","focusedItem","any","selectedItem","searchTerm","string","disabled","acceptsArray","messages","shape","emptyList","isRequired","element","observeChanges","scrollIntoView","useCallback","querySelector","block","inline","subtree","attributes","attributeFilter","multiple","dataItems","onChange","dataItem","event","lastValue","originalEvent","checked","includes","filter","d","action","List","forwardRef","_ref","outerRef","_elementProps$role","value","accessors","className","groupBy","elementRef","Option","renderList","id","useInstanceId","makeArray","groupedData","useMemo","groupBySortedKeys","undefined","ref","disabledItems","toItemArray","useMessagesWithDefaults","divRef","handleSelect","elementProps","useImperativeHandle","renderOption","item","idx","textValue","text","itemIsDisabled","itemIsSelected","createElement","selected","index","items","map","group","role","rootProps","assign","tabIndex","children","Children","count","displayName","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.useHandleSelect = useHandleSelect;\nexports.default = exports.useScrollFocusedIntoView = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _ListOption = _interopRequireDefault(require(\"./ListOption\"));\n\nvar _ListOptionGroup = _interopRequireDefault(require(\"./ListOptionGroup\"));\n\nvar _messages = require(\"./messages\");\n\nvar CustomPropTypes = _interopRequireWildcard(require(\"./PropTypes\"));\n\nvar _ = require(\"./_\");\n\nvar _WidgetHelpers = require(\"./WidgetHelpers\");\n\nvar _useMutationObserver = _interopRequireDefault(require(\"@restart/hooks/useMutationObserver\"));\n\nvar _useCallbackRef = _interopRequireDefault(require(\"@restart/hooks/useCallbackRef\"));\n\nvar _useMergedRefs = _interopRequireDefault(require(\"@restart/hooks/useMergedRefs\"));\n\nconst _excluded = [\"multiple\", \"data\", \"value\", \"onChange\", \"accessors\", \"className\", \"messages\", \"disabled\", \"renderItem\", \"renderGroup\", \"searchTerm\", \"groupBy\", \"elementRef\", \"optionComponent\", \"renderList\"];\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst whitelist = ['style', 'className', 'role', 'id', 'autocomplete', 'size', 'tabIndex', 'maxLength', 'name'];\nconst whitelistRegex = [/^aria-/, /^data-/, /^on[A-Z]\\w+/];\n\nfunction pickElementProps(props) {\n  const result = {};\n  Object.keys(props).forEach(key => {\n    if (whitelist.indexOf(key) !== -1 || whitelistRegex.some(r => !!key.match(r))) result[key] = props[key];\n  });\n  return result;\n}\n\nconst propTypes = {\n  data: _propTypes.default.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: _propTypes.default.func,\n  onMove: _propTypes.default.func,\n  onHoverOption: _propTypes.default.func,\n  optionComponent: _propTypes.default.elementType,\n  renderItem: _propTypes.default.func,\n  renderGroup: _propTypes.default.func,\n  focusedItem: _propTypes.default.any,\n  selectedItem: _propTypes.default.any,\n  searchTerm: _propTypes.default.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: _propTypes.default.shape({\n    emptyList: _propTypes.default.func.isRequired\n  })\n};\n\nconst useScrollFocusedIntoView = (element, observeChanges = false) => {\n  const scrollIntoView = (0, _react.useCallback)(() => {\n    if (!element) return;\n    let selectedItem = element.querySelector('[data-rw-focused]');\n\n    if (selectedItem && selectedItem.scrollIntoView) {\n      selectedItem.scrollIntoView({\n        block: 'nearest',\n        inline: 'nearest'\n      });\n    }\n  }, [element]);\n  (0, _useMutationObserver.default)(observeChanges ? element : null, {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['data-rw-focused']\n  }, scrollIntoView);\n  return scrollIntoView;\n};\n\nexports.useScrollFocusedIntoView = useScrollFocusedIntoView;\n\nfunction useHandleSelect(multiple, dataItems, onChange) {\n  return (dataItem, event) => {\n    if (multiple === false) {\n      onChange(dataItem, {\n        dataItem,\n        lastValue: dataItems[0],\n        originalEvent: event\n      });\n      return;\n    }\n\n    const checked = dataItems.includes(dataItem);\n    onChange(checked ? dataItems.filter(d => d !== dataItem) : [...dataItems, dataItem], {\n      dataItem,\n      lastValue: dataItems,\n      action: checked ? 'remove' : 'insert',\n      originalEvent: event\n    });\n  };\n}\n\nconst List = /*#__PURE__*/_react.default.forwardRef(function List(_ref, outerRef) {\n  var _elementProps$role;\n\n  let {\n    multiple = false,\n    data = [],\n    value,\n    onChange,\n    accessors,\n    className,\n    messages,\n    disabled,\n    renderItem,\n    renderGroup,\n    searchTerm,\n    groupBy,\n    elementRef,\n    optionComponent: Option = _ListOption.default,\n    renderList\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const id = (0, _WidgetHelpers.useInstanceId)();\n  const dataItems = (0, _.makeArray)(value, multiple);\n  const groupedData = (0, _react.useMemo)(() => groupBy ? (0, _.groupBySortedKeys)(groupBy, data) : undefined, [data, groupBy]);\n  const [element, ref] = (0, _useCallbackRef.default)();\n  const disabledItems = (0, _.toItemArray)(disabled);\n  const {\n    emptyList\n  } = (0, _messages.useMessagesWithDefaults)(messages);\n  const divRef = (0, _useMergedRefs.default)(ref, elementRef);\n  const handleSelect = useHandleSelect(multiple, dataItems, onChange);\n  const scrollIntoView = useScrollFocusedIntoView(element, true);\n  let elementProps = pickElementProps(props);\n  (0, _react.useImperativeHandle)(outerRef, () => ({\n    scrollIntoView\n  }), [scrollIntoView]);\n\n  function renderOption(item, idx) {\n    const textValue = accessors.text(item);\n    const itemIsDisabled = disabledItems.includes(item);\n    const itemIsSelected = dataItems.includes(item);\n    return /*#__PURE__*/_react.default.createElement(Option, {\n      dataItem: item,\n      key: `item_${idx}`,\n      searchTerm: searchTerm,\n      onSelect: handleSelect,\n      disabled: itemIsDisabled,\n      selected: itemIsSelected\n    }, renderItem ? renderItem({\n      item,\n      searchTerm,\n      index: idx,\n      text: textValue,\n      // TODO: probably remove\n      value: accessors.value(item),\n      disabled: itemIsDisabled\n    }) : textValue);\n  }\n\n  const items = groupedData ? groupedData.map(([group, items], idx) => /*#__PURE__*/_react.default.createElement(\"div\", {\n    role: \"group\",\n    key: `group_${idx}`\n  }, /*#__PURE__*/_react.default.createElement(_ListOptionGroup.default, null, renderGroup ? renderGroup({\n    group\n  }) : group), items.map(renderOption))) : data.map(renderOption);\n  const rootProps = Object.assign({\n    id,\n    tabIndex: 0,\n    ref: divRef\n  }, elementProps, {\n    'aria-multiselectable': !!multiple,\n    className: (0, _classnames.default)(className, 'rw-list'),\n    role: (_elementProps$role = elementProps.role) != null ? _elementProps$role : 'listbox',\n    children: _react.default.Children.count(items) ? items : /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"rw-list-empty\"\n    }, emptyList())\n  });\n  return renderList ? renderList(rootProps) : /*#__PURE__*/_react.default.createElement(\"div\", rootProps);\n});\n\nList.displayName = 'List';\nList.propTypes = propTypes;\nvar _default = List;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}